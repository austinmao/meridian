{"id": "mem-0001", "timestamp": "2025-11-27T22:08:07Z", "summary": "**Decision:** Beads (steveyegge/beads) and Meridian serve complementary purposes - use Beads for lightweight git-backed issue tracking with dependency graphs, Meridian for heavyweight task briefs requiring planning and approval.\n**Problem:** AI agents need both quick issue filing (discovered bugs, subtasks) and structured task management (complex features with stakeholder approval).\n**Alternatives:** Use only Meridian (rejected: too heavyweight for discovered bugs); use only Beads (rejected: lacks detailed planning structure for complex work).\n**Trade-offs:** Running two systems adds cognitive overhead but provides right-sized tools for each granularity level.\n**Impact/Scope:** Affects how agents manage work - Beads for day-to-day tracking (bd ready, bd create), Meridian for epics/features requiring briefs.\n**Pattern:** Two-layer task management: Beads issues can link to Meridian tasks via beads_issues field in TASK-###.yaml; escalate complex Beads issues to Meridian tasks.", "tags": ["architecture", "tooling", "pattern", "decision"], "links": ["https://github.com/steveyegge/beads", ".meridian/task-backlog.yaml", ".meridian/tasks/"]}
{"id": "mem-0002", "timestamp": "2025-11-27T22:18:56Z", "summary": "**Decision:** Do NOT replace Meridian task system with Beads - use hybrid approach. Beads lacks memory system (memory decay removes old issues), rich task briefs, approval workflows, and context logs.\n**Problem:** Evaluated whether Beads could fully replace Meridian tasks. Found Beads optimizes for agent autonomy while Meridian optimizes for human oversight with structured planning.\n**Alternatives:** Full Beads replacement (rejected: loses requirements/acceptance criteria/risks/validation structure, no memory.jsonl equivalent); Meridian only (rejected: too heavyweight for discovered bugs/subtasks).\n**Trade-offs:** Hybrid adds cognitive overhead of two systems but provides right-sized tools: Beads for lightweight issues, Meridian for complex features needing approval.\n**Impact/Scope:** Confirms mem-0001 recommendation. Meridian memory.jsonl remains essential - Beads has no equivalent and actively removes history.\n**Pattern:** Agent autonomy (Beads) vs human oversight (Meridian) - choose based on trust level and approval requirements.", "tags": ["architecture", "tooling", "decision", "lesson"], "links": ["mem-0001", "https://github.com/steveyegge/beads", ".meridian/memory.jsonl"]}
{"id": "mem-0003", "timestamp": "2025-11-27T22:38:14Z", "summary": "**Decision:** Hybrid Beads+Meridian architecture - Meridian as strategic layer (epics, memory, standards), Beads as tactical layer (issues, dependencies, ready work).\n**Problem:** Needed concrete implementation for hybrid approach recommended in mem-0001/mem-0002.\n**Alternatives:** N/A - this implements the previously decided hybrid pattern.\n**Trade-offs:** Two systems to maintain, but clear separation: complex features needing approval go to Meridian TASK, everything else goes to Beads.\n**Impact/Scope:** Affects task-backlog.yaml (add beads_root field), TASK-###.yaml (add beads.epic_id), session workflow (bd ready → work → bd close → update context).\n**Pattern:** Decision tree: Complex feature needing approval? → Meridian. Architectural decision? → memory.jsonl. Everything else? → Beads. Link via beads_root/epic_id fields.", "tags": ["architecture", "tooling", "pattern"], "links": ["mem-0001", "mem-0002", ".meridian/task-backlog.yaml"]}
{"id": "mem-0004", "timestamp": "2025-11-27T23:16:39Z", "summary": "**Decision:** Created claude-hooks-skills-master agent at .claude/agents/claude-hooks-skills-master.md for Claude Code infrastructure development.\n**Problem:** Needed specialized agent for creating/debugging/securing Claude Code hooks, skills, and slash commands.\n**Alternatives:** Generic Python agent (rejected: lacks Claude Code-specific patterns); manual hook development (rejected: error-prone without structured workflow).\n**Trade-offs:** Agent is comprehensive (~400 lines) but covers full lifecycle; may need trimming if context becomes an issue.\n**Impact/Scope:** Use for any Claude Code customization: hooks (all 8 types), skills (500-line modular pattern), auto-activation, security guards.\n**Pattern:** Reference repos: disler/claude-code-hooks-mastery (hooks, exit codes, security) and diet103/claude-code-infrastructure-showcase (skills, auto-activation). UV single-file Python scripts for hooks; 500-line modular pattern for skills.", "tags": ["tooling", "pattern", "decision"], "links": [".claude/agents/claude-hooks-skills-master.md", "https://github.com/disler/claude-code-hooks-mastery", "https://github.com/diet103/claude-code-infrastructure-showcase"]}
{"id": "mem-0005", "timestamp": "2025-11-29T18:39:33Z", "summary": "**Decision:** Implemented enhanced Claude Code infrastructure with UV-based hooks and auto-activating skills based on patterns from disler/claude-code-hooks-mastery and diet103/claude-code-infrastructure-showcase repos.\n**Problem:** Meridian lacked security guards for dangerous commands, automatic skill suggestions, context backup before compaction, and comprehensive tool logging.\n**Alternatives:** Plain Python hooks (rejected: UV pattern provides self-contained dependencies); manual skill loading (rejected: auto-activation reduces friction).\n**Trade-offs:** UV single-file scripts add ~1s startup overhead per hook, but gain dependency isolation and portability.\n**Impact/Scope:** All Claude sessions now have: security-guard.py (blocks rm -rf, --no-verify, .env access), skill-activator.py (suggests relevant skills), pre-compact-backup.py (preserves context), tool-logger.py (audit trail in logs/).\n**Pattern:** UV single-file scripts with # /// script metadata; skill-rules.json for auto-activation triggers; 500-line modular skill pattern with resources/ subdirectory.", "tags": ["tooling", "pattern", "decision", "architecture"], "links": ["mem-0004", ".claude/hooks/security-guard.py", ".claude/hooks/skill-activator.py", ".claude/skills/skill-rules.json", ".claude/skills/git-safety/", ".claude/skills/meridian-workflow/"]}
{"id": "mem-0006", "timestamp": "2025-11-29T22:00:24Z", "summary": "**Decision:** Integrated GitHub spec-kit (spec-driven development toolkit) with Meridian via speckit-capture.py hook and spec-kit skill.\n**Problem:** Needed structured specification workflow before implementation; Meridian lacked spec-driven planning integration.\n**Alternatives:** Manual spec writing (rejected: no automation); full spec-kit replacement of Meridian (rejected: loses approval workflow and memory system).\n**Trade-offs:** Additional complexity of two systems (spec-kit for specs, Meridian for tracking), but clear separation: spec-kit generates specs → human approves → Meridian tracks execution.\n**Impact/Scope:** New workflow: /speckit.specify → /speckit.plan → approval → TASK-### creation → /speckit.tasks → execution. Hook captures spec-kit output for Meridian integration.\n**Pattern:** Spec-kit commands map to Meridian artifacts: specify→requirements, plan→TASK-###-plan.md, tasks→Beads issues. PostToolUse hook on SlashCommand matcher captures output.", "tags": ["architecture", "tooling", "pattern", "decision"], "links": ["mem-0005", ".claude/hooks/speckit-capture.py", ".claude/skills/spec-kit/", "https://github.com/github/spec-kit"]}
{"id": "mem-0007", "timestamp": "2025-11-29T23:15:00Z", "summary": "**Decision:** Enhanced speckit-capture.py to automatically create Meridian TASK-### folders from spec-kit outputs instead of just capturing/displaying.\n**Problem:** Manual task creation from spec-kit output was tedious; users requested tighter integration where spec-kit writes directly to Meridian tasks.\n**Alternatives:** Keep manual workflow (rejected: friction slows adoption); fully automatic without draft status (rejected: bypasses approval workflow).\n**Trade-offs:** Tasks created with status 'draft' preserves approval workflow while automating scaffolding. Added pyyaml dependency.\n**Impact/Scope:** /speckit.specify creates TASK-### folder with YAML+plan+context files and updates task-backlog.yaml. /speckit.plan updates active draft task's plan. /speckit.tasks adds checklist to context. All auto-linked to most recent draft task.\n**Pattern:** Draft-first pattern: auto-create with status='draft', user reviews/approves by changing to 'todo'. Hook tracks 'active draft task' to chain specify→plan→tasks commands.", "tags": ["architecture", "tooling", "pattern", "enhancement"], "links": ["mem-0006", ".claude/hooks/speckit-capture.py", ".meridian/tasks/", "docs/artifacts/speckit-meridian-integration.md"]}
{"id": "mem-0008", "timestamp": "2025-11-29T22:47:04Z", "summary": "**Decision:** Implemented Notification and SubagentStop hooks based on claude-code-hooks-mastery patterns, completing all 8 Claude Code hook types.\n**Problem:** Meridian lacked notification logging and subagent completion tracking; missed audit trail for these events.\n**Alternatives:** Manual logging (rejected: inconsistent); no logging (rejected: loses debugging/audit capability).\n**Trade-offs:** Additional hook overhead (~1s startup per event), but gains comprehensive event logging and optional TTS notifications.\n**Impact/Scope:** All Claude sessions now have: notification.py (logs to JSONL, optional TTS), subagent-stop.py (logs completions, converts transcript to chat.json), enhanced skill-activator.py (prompt logging, session management, validation).\n**Pattern:** UV single-file scripts with argparse flags for optional features (--log-prompts, --store-session, --chat). Exit codes: 0=success, 2=block. Session data in .claude/data/sessions/.", "tags": ["tooling", "pattern", "decision"], "links": ["mem-0005", ".claude/hooks/notification.py", ".claude/hooks/subagent-stop.py", ".claude/hooks/skill-activator.py", "https://github.com/disler/claude-code-hooks-mastery"]}
{"id": "mem-0009", "timestamp": "2025-11-29T23:03:32Z", "summary": "**Decision:** Added git context (branch, uncommitted changes, GitHub issues) to SessionStart hooks for universal boilerplate utility.\n**Problem:** Sessions started without awareness of git state; users had to manually check branch and working tree status.\n**Alternatives:** Skip git context (rejected: universally useful, zero-config); add full TTS/LLM features (rejected: requires API keys, not suitable for boilerplate).\n**Trade-offs:** Adds ~50ms to session start for git commands; gracefully degrades if git/gh unavailable.\n**Impact/Scope:** Both claude-init.py (startup|clear) and session-reload.py (compact|resume) now show git status. GitHub issues shown only if gh CLI available.\n**Pattern:** Zero-config enhancement pattern: add features that work universally without configuration, gracefully degrade if dependencies missing.", "tags": ["tooling", "pattern", "enhancement"], "links": ["mem-0008", ".claude/hooks/claude-init.py", ".claude/hooks/session-reload.py"]}
{"id": "mem-0010", "timestamp": "2025-11-29T23:20:56Z", "summary": "**Decision:** Restructured Meridian as a Claude Code plugin using .claude-plugin/plugin.json manifest pattern for external installation via settings.json plugins array.\n**Problem:** Users needed to manually copy .claude/ and .meridian/ folders; no standard installation mechanism existed.\n**Alternatives:** npm/npx package (rejected: adds Node dependency); GitHub template repo (rejected: only for new projects); slash command installer (rejected: still requires manual setup).\n**Trade-offs:** Plugin approach requires users to run /init-meridian separately to scaffold .meridian/ in their project, but gains zero-copy installation and automatic updates from upstream.\n**Impact/Scope:** New files: .claude-plugin/plugin.json (manifest), .claude-plugin/hooks.json (portable hook definitions using ${CLAUDE_PLUGIN_ROOT}), commands/init-meridian.md (scaffolding command). README updated with plugin installation as recommended option.\n**Pattern:** Plugin structure: .claude-plugin/plugin.json with commands/, agents/, skills/ paths; hooks use ${CLAUDE_PLUGIN_ROOT} for portability; separate /init command for project-specific scaffolding.", "tags": ["architecture", "tooling", "pattern", "decision"], "links": [".claude-plugin/plugin.json", ".claude-plugin/hooks.json", "commands/init-meridian.md", "README.md"]}
{"id": "mem-0011", "timestamp": "2025-11-29T23:52:37Z", "summary": "**Decision:** Created 'basecamp' marketplace at austinmao/basecamp as the distribution hub for Meridian and future Claude Code plugins.\n**Problem:** Meridian plugin needed a marketplace for /plugin install command discovery.\n**Alternatives:** Self-contained marketplace in Meridian repo (rejected: limits flexibility for adding other plugins); direct plugin reference only (rejected: requires manual settings.json editing).\n**Trade-offs:** Separate repo adds maintenance overhead but enables curated plugin collection and cleaner branding.\n**Impact/Scope:** Users install via '/plugin marketplace add austinmao/basecamp' then '/plugin install meridian@basecamp'. Teams auto-install via extraKnownMarketplaces in settings.json.\n**Pattern:** Marketplace-first distribution: create themed marketplace (basecamp = expedition supplies), list plugins with source refs to their repos, marketplace handles discovery and versioning.", "tags": ["architecture", "tooling", "decision"], "links": ["mem-0010", "https://github.com/austinmao/basecamp", ".claude-plugin/marketplace.json"]}
{"id": "mem-0012", "timestamp": "2025-11-29T23:57:10Z", "summary": "**Decision:** Enhanced /init-meridian command with presence detection and merge-by-default behavior.\n**Problem:** Projects with existing Meridian installations were prompted unnecessarily; risk of overwriting user data (memory.jsonl, task-backlog.yaml).\n**Alternatives:** Always prompt user (rejected: friction for partial installs); always overwrite (rejected: destroys user data); skip if any .meridian exists (rejected: misses new files added to Meridian).\n**Trade-offs:** Slightly more complex command logic, but zero user prompts and guaranteed data preservation.\n**Impact/Scope:** /init-meridian now checks each file with test -f/-d, creates only missing files, never overwrites, reports what was skipped vs created.\n**Pattern:** Merge-by-default initialization: check existence → skip if exists → create if missing → report diff. Preserves user data while ensuring complete installation.", "tags": ["tooling", "pattern", "enhancement"], "links": ["mem-0010", "mem-0011", "commands/init-meridian.md"]}
